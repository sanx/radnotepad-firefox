<!DOCTYPE html>
<!-- Copyright (c) 2014 Gerardo Moad -->
<html>
<head>
<meta charset="utf-8">
<style>
    fieldset legend {
        font-style: italic;
    }
    fieldset.main {
        border: none;
    }
    div fieldset a {
        display: block;
    }
    div fieldset input[type=text] {
        width: 100%;
    }
</style>
<script>
document.addEventListener('DOMContentLoaded', function () {
    ['json', 'zip'].forEach(function (type) {
        var downloadNameElem = document.querySelector("#" + type + "-download .download-name"),
            downloadLinkElem = document.querySelector("#" + type + "-download .download-link"),
            now = new Date();

        downloadNameElem.addEventListener('change', function (ev) {
            downloadLinkElem.download = this.value;
            downloadLinkElem.setAttribute('download', this.value);
        });

        downloadNameElem.value = "all-notes-" + now.toISOString() + "." + type;
        downloadLinkElem.download = "all-notes-" + now.toISOString() + "." + type;
    });
    var downloadLinkElem = document.querySelector("#zip-download .download-link");
    downloadLinkElem.setAttribute('href', ('{{zip-download-uri}}'));
});
</script>
</head>
<body>
<div>
<fieldset class="main">
<legend>Download</legend>
    <fieldset id="json-download">
    <legend>JSON</legend>
    <label for="json-download-name">Desired filename: <input id="json-download-name" type="text" class="download-name" value="all-notes.json"/></label>
    <a download="all-notes.json" class="download-link" href="{{json-download-uri}}">Download</a>
    </fieldset>

    <fieldset id="zip-download">
    <legend>Zip</legend>
    <label for="zip-download-name">Desired filename: <input id="zip-download-name" type="text" class="download-name" value="all-notes.zip"/></label>
    <a download="all-notes.zip" class="download-link" href="#">Download</a>
    </fieldset>
</fieldset>
</div>
</body>
</html>
